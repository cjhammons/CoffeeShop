Coffee Shop Full Stack
---------

This is one of the projects fron Udacity's Fullstack Nanodegree. The purpose of this project was to implement an API for a coffee shop interface and secure it using Auth0. 

## Technologies used
- Python
- Flask
- SQLAlchemy
- Auth0
- PostgreSQL

## Models
There is only one data model used in this api, Drink.

### Drink
Entity representing a drink that can be ordered from the coffe shop.

#### Attributes:
- ``id``: unique integer id generated by postgres
- ``title``: Name of the drink
- ``recipe``: JSON array of a JSON object representing parts of the drink's recipe. Each ingredient of the recipe has these attributes:
  - ``color``: Color that the part will appear as on the web page
  - ``name``: Name of the ingredient
  - ``parts``: How much of the drink the ingredient makes up. For example: if ingredient ``A`` is 2 parts and the sum of the parts of all ingredients is 5 then the ingredient is 2/5 of the recipe
 
 #### Methods:
 - ``short()``: Returns a 'short' formatted representation of the drink. 
 - ``long()``: Returns a 'long' formatted representation of the drink. 
 - ``insert()``: Inserts the drink object into the SQL database.
 - ``delete()``: Deletes the drink object from the SQL database.
 - ``update()``: Updates the drink object in the SQL database.
 


## Endpoints
The endpoints can be found in backend/src/api.py.

- ``GET /drinks``: Gets all drinks in the short format returned by Drink class method ``short()``
- ``GET /drinks-detail``:  Gets all drinks in the long format returned by Drunk class method ``long()``
  - Permission required: ``get:drinks-detail``
- ``POST /drinks``: Creates a new drink in the drinks table. 
  - Params required:
    - ``title``
    - ``recipe``
   - Permissions required: ``post:drinks``
- ``PATCH /drinks/<int:drink_id>``: Updates an existing drink model in the database. 
  - Args required: ``drink_id``, the id of the drink to be updated
  - Params required:
    - ``title``
    - ``recipe``
   - Permissions required: ``patch:drinks``
- ``DELETE /drinks/<int:drink_id>``: Deletes a drink from the database.
  - Args required: ``drink_id``
  - Permissions required: ``delete:drinks``

## Auth0
Auth0 is used to handle authorization of the API.

### Permissions
Here are the permisisons defined within Auth0 that the API uses:
- ``get:drink-details``: Read drink details
- ``post:drinks``: Create new drinks
- ``patch:drinks``: edit drinks
- ``delete:drinks``: remove drinks

### Roles
Two roles are defined that use different set of permissions.

#### Barista
Baristas only need to see the drinks and what ingredients are in them, so they only have one permission:
  - ``get:drinks-detail``
  
#### Manager
The Manager is the big boss, they have all the permissions to do what they please:
- ``get:drink-details``
- ``post:drinks``
- ``patch:drinks``
- ``delete:drinks``
